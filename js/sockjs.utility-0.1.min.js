var SockJSUtility={};!function(){!function(a){a.connect=function(a){return new SockJSUtility.Socket(a)}}(SockJSUtility),function(a){var b={merge:function(a,c,d,e){var h,f=e||[],g="undefined"==typeof d?2:d,a=a||{};for(h in c)c.hasOwnProperty(h)&&b.indexOf(f,h)<0&&("object"==typeof a[h]&&g?b.merge(a[h],c[h],g-1,f):(a[h]=c[h],f.push(c[h])));return a},mixin:function(a,c){b.merge(a.prototype,c.prototype)},indexOf:function(a,b,c){for(var d=a.length,c=0>c?0>c+d?0:c+d:c||0;d>c&&a[c]!==b;c++);return c>=d?-1:c},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)}};a.JSUtility=b}(SockJSUtility),function(a){function b(){}a.EventEmitter=b,b.prototype={constructor:b,on:function(b,c){return this.$events||(this.$events={}),this.$events[b]?a.JSUtility.isArray(this.$events[b])?this.$events[b].push(c):this.$events[b]=[this.$events[b],c]:this.$events[b]=c,this},removeListener:function(b,c){if(this.$events&&this.$events[b]){var d=this.$events[b];if(a.JSUtility.isArray(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[b]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[b]}return this},removeAllListeners:function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},emit:function(a){if(!this.$events)return!1;var b=this.$events[a];if(!b)return!1;var c=Array.prototype.slice.call(arguments,1);if("function"==typeof b)b.apply(this,c);else{if(!io.util.isArray(b))return!1;for(var d=b.slice(),e=0,f=d.length;f>e;e++)d[e].apply(this,c)}return!0}},b.prototype.off=b.prototype.removeListener,b.prototype.$emit=b.prototype.emit}(SockJSUtility),function(a){function b(b){this.utli_options={host:document.domain,need_reconnect:!0,reconnection_delay:500,reconnection_delay_limit:1/0,max_reconnection_attempts:20},this.connected=!1,this.connecting=!1,this.disconnecting=!1,a.JSUtility.merge(this.utli_options,b),this.socket=function(){},this.connect()}a.Socket=b,b.prototype={constructor:b,send:function(a,b){var c;return a?(b?(c={event:a,data:b},c=JSON.stringify(c)):c=JSON.stringify(a),this.socket.send(c),void 0):!1},disconnect:function(){this.disconnecting=!0},connect:function(){if(this.utli_options&&this.utli_options.host&&this.utli_options.host.length>0){var a=this,b=null,c=0,d=this.utli_options.reconnection_delay,e=function(){a.connected=!0,a.connecting=!1,h(),a.emit("onopen"),a.onopen&&a.onopen()},f=function(b){a.emit("onmessage",b);try{var c=JSON.parse(b.data);c.event&&c.data&&a.emit(c.event,c.data)}catch(d){}a.onmessage&&a.onmessage(b.data)},g=function(){a.connected=!1,a.connecting=!1,i(),a.emit("onclose"),a.onclose&&a.onclose()},h=function(){clearInterval(b),c=0,a.disconnecting=!1,d=a.utli_options.reconnection_delay},i=function(){var e=function(){if(a.disconnecting||a.connected)return h();if(!a.connecting&&c++<a.utli_options.max_reconnection_attempts){if(d<a.utli_options.reconnection_delay_limit){var b=500*c+5*Math.random();d+=b}j()}};b=setTimeout(e,d)},j=function(){a.connected=!1,a.connecting=!0,a.socket=null,delete a.socket,a.socket=new SockJS(a.utli_options.host),a.socket.onopen=e,a.socket.onmessage=f,a.socket.onclose=g};j()}return this}},a.JSUtility.mixin(b,a.EventEmitter)}(SockJSUtility)}(),function(nativeJSON){"use strict";function f(a){return 10>a?"0"+a:a}function date(a){return isFinite(a.valueOf())?a.getUTCFullYear()+"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z":null}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i instanceof Date&&(i=date(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}var JSON={};if(!nativeJSON){nativeJSON=JSON;var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}}("undefined"!=typeof JSON?JSON:void 0);